<div class="container">
    <button *ngIf="!isEditing" mat-icon-button aria-label="Go back button" routerLink="../list">
        <mat-icon>arrow_back</mat-icon>
    </button>
    <div class="h3 text-center">{{ isEditing?'Edit user': 'Add user'}}</div>
</div>
<div class="container">

    <form [formGroup]="userForm" #formDirective="ngForm" (ngSubmit)="onSubmit(formDirective)">

        <mat-form-field class=" name pt-3">
            <mat-label>Name</mat-label>
            <input matInput placeholder="name" formControlName="name" [errorStateMatcher]="matcher">
            <mat-error
                *ngIf="userForm.get('name')?.hasError('minlength') && !userForm.get('name')?.hasError('required')">
                The name should have at least 5 characters
            </mat-error>
            <mat-error
                *ngIf="userForm.get('name')?.hasError('maxlength') && !userForm.get('name')?.hasError('required')">
                The name should have at most 20 characters
            </mat-error>
            <mat-error *ngIf="userForm.get('name')?.hasError('required')">
                Name is <strong>required</strong>
            </mat-error>
        </mat-form-field>

        <mat-form-field class="username pt-3">
            <mat-label>Username</mat-label>
            <input matInput placeholder="username" formControlName="username" [errorStateMatcher]="matcher">
            <mat-error
                *ngIf="userForm.get('username')?.hasError('minlength') && !userForm.get('username')?.hasError('required')">
                The username should have at least 5 characters
            </mat-error>
            <mat-error
                *ngIf="userForm.get('username')?.hasError('maxlength') && !userForm.get('username')?.hasError('required')">
                The username should have at most 20 characters
            </mat-error>
            <mat-error *ngIf="userForm.get('username')?.hasError('required')">
                Username is <strong>required</strong>
            </mat-error>
        </mat-form-field>

        <mat-form-field class="email pt-3">
            <mat-label>Email</mat-label>
            <input matInput placeholder="email" formControlName="email" [errorStateMatcher]="matcher">
            <mat-error *ngIf="userForm.get('email')?.hasError('email') && !userForm.get('email')?.hasError('required')">
                Invalid email
            </mat-error>
            <mat-error *ngIf="userForm.get('email')?.hasError('required')">
                Email is <strong>required</strong>
            </mat-error>
        </mat-form-field>


        <button mat-button [disabled]="!userForm.valid || userForm.pristine" class="btn btn-primary mt-2">{{isEditing?
            'Save':
            'Add'}}
        </button>
        <button mat-button *ngIf="isEditing" class="btn btn-primary mt-2" (click)="onCancel()">Cancel</button>
    </form>
</div>